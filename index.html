<!DOCTYPE html>
<html>
    <head>
        <title>Pac Man</title>
    </head>
    <body onkeydown="keyHandler(event)" onkeyup="timerrun()">
        <center>
        <canvas height=700 width=1000 id="duk" style="cursor:none; border: 1px solid black;"></canvas>
        <div id="welcome" style="position: relative; top: -500px;"></div>
        </center>
        
        
        <script>
            var c = document.getElementById("duk");
            var ctx = c.getContext("2d");
            
            var ring;
            var xMan = 500, yMan = 850, xAcc = 0, yAcc = -0.5;
            var key;
            var play = 0, enter = 0, sluta = 0;
            
            // Färger till välkoms texten.
            welcome.style.fontSize = '28px';
            welcome.style.color = 'blue';
            
            function PacMan(x, y) {
                ctx.beginPath();
                ctx.arc(x, y, 20, 0, 2*Math.PI);
                ctx.fill();
            }
            function timerstop() {
                xAcc = 0;
                yAcc = 0;
            }
            
            function keyHandler(event) {
                key = event.keyCode;
                if(key == 87 && play == 1) { // W
                    yAcc = -1;
                } else if(key == 83 & play == 1) { // S
                    yAcc = 1;
                } else if(key == 65 && play == 1) { // A
                    xAcc = -1;
                } else if(key == 68 && play == 1) { // D
                    xAcc = 1;
                } else if(key == 13 && enter == 1) { // Enter
                    enter = 0;
                    play = 1;
                    document.getElementById('welcome').innerHTML = " ";
                }
            }
            function timerrun() { // FIXA DETTA
                setTimeout(function() { timerstop(); }, 800);
            }
            
            
            // Timer
            function timer() {
                enter = 1;
                sluta  = 1;
                document.getElementById('welcome').innerHTML = "Welcome! Control the ball with WASD. Press enter to continue.";
                
            }
            
            function repaint() {
                ctx.clearRect(0, 0, 1000, 1000);
                yMan = yMan + yAcc;
                xMan = xMan + xAcc;
                PacMan(xMan, yMan);
                
                // Start
                if(yMan == 600 && xMan == 500) {
                    yAcc = 0;
                    if(sluta == 0) {
                    setTimeout(function() { timer(); }, 800);
                    }
                }
                
            }
        window.setInterval(repaint, 1);
        </script>
    </body>
</html>